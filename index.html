<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>Info Cuaca & Gempa Lumajang</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<style>
:root {
  --bg1: #3a7bd5;
  --bg2: #00d2ff;
  --text: #0f172a;
  --accent: #2563eb;
  --card: rgba(255,255,255,0.9);
}
*{box-sizing:border-box;margin:0;padding:0;font-family:'Poppins',sans-serif}
body{
  min-height:100vh;
  background:linear-gradient(135deg,var(--bg1),var(--bg2));
  color:var(--text);
  display:flex;flex-direction:column;align-items:center;
  overflow-x:hidden;
}
body::before {
  content: "";
  position: fixed;
  inset: 0;
  background: url('gunung.jpeg') center/cover no-repeat;
  opacity: 0.50; /* ubah angka ini untuk menyesuaikan ketebalan gambar: 0.1-0.4 */
  z-index: -1; /* pastikan di belakang semua elemen */
}

.container{max-width:1100px;width:90%;padding:24px 0;}
header{text-align:center;color:#fff;text-shadow:0 2px 6px rgba(0,0,0,.3);margin-bottom:20px;}
header h1{font-size:1.9rem;margin-bottom:4px}
header p{opacity:.9}
.slide-container{position:relative;width:100%;overflow:hidden;border-radius:20px;box-shadow:0 6px 30px rgba(0,0,0,0.2);}
.slide{
  display:none;
  justify-content:center;
  align-items:center;
  background:var(--card);
  border-radius:20px;
  padding:30px;
  animation:fadeIn .6s ease;
}
.slide.active{display:flex;}
.card{max-width:800px;width:100%;}
.card h2{text-align:center;color:var(--accent);margin-bottom:15px;}
.data-item{display:flex;justify-content:space-between;background:#f1f5f9;border-left:5px solid var(--accent);padding:10px 15px;margin:6px 0;border-radius:10px;}
.chartBox{width:100%;height:300px;margin-top:15px;}
iframe{width:100%;height:450px;border:none;border-radius:12px;}
.controls{display:flex;justify-content:center;align-items:center;gap:10px;margin-top:20px;flex-wrap:wrap;}
.btn{background:#fff;border:none;color:var(--accent);border-radius:999px;padding:10px 20px;cursor:pointer;font-weight:600;transition:.3s;}
.btn:hover{transform:scale(1.05);}
.dot{width:12px;height:12px;border-radius:50%;background:rgba(255,255,255,0.6);cursor:pointer;transition:.3s;}
.dot.active{background:#fff;transform:scale(1.3);}
.progress{width:280px;height:6px;background:rgba(255,255,255,0.4);margin:20px auto;border-radius:6px;overflow:hidden;}
.fill{height:100%;width:0%;background:#fff;transition:width .1s linear;}
footer{color:#fff;text-align:center;margin-top:10px;font-size:.9rem;}
@keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:none}}
</style>
</head>
<body>
<div class="container">
  <header>
    <h1>üå§Ô∏è Info Cuaca & Gempa Lumajang</h1>
    <p>Condro ‚Äì Pasirian ‚Äì Jawa Timur</p>
    <p id="update"></p>
  </header>

  <div class="slide-container" id="slides">
    <div class="slide active">
      <div class="card">
        <h2>üå°Ô∏è Cuaca Saat Ini</h2>
        <div class="data-item"><span>Suhu</span><span>28¬∞C</span></div>
        <div class="data-item"><span>Kelembaban</span><span>75%</span></div>
        <div class="data-item"><span>Tekanan</span><span>1012 mb</span></div>
        <div class="data-item"><span>Kondisi</span><span>Berawan</span></div>
      </div>
    </div>
    <div class="slide">
      <div class="card">
        <h2>üí® Informasi Angin</h2>
        <div class="data-item"><span>Arah</span><span>Timur Laut</span></div>
        <div class="data-item"><span>Kecepatan</span><span>15 km/jam</span></div>
        <div class="data-item"><span>Hembusan</span><span>25 km/jam</span></div>
        <div class="chartBox"><canvas id="windChart"></canvas></div>
      </div>
    </div>
    <div class="slide">
      <div class="card">
        <h2>üåßÔ∏è Curah Hujan</h2>
        <div class="data-item"><span>Intensitas</span><span>Ringan</span></div>
        <div class="data-item"><span>Curah</span><span>5 mm/jam</span></div>
        <div class="data-item"><span>Prakiraan</span><span>60% hujan sore</span></div>
        <div class="chartBox"><canvas id="rainChart"></canvas></div>
      </div>
    </div>
    <div class="slide">
<div class="card">
  <h2>üåç Gempa Terkini</h2>
  <div class="data-item"><span>Magnitudo</span><span id="qMag">‚Äì</span></div>
  <div class="data-item"><span>Kedalaman</span><span id="qDepth">‚Äì</span></div>
  <div class="data-item"><span>Lokasi</span><span id="qLoc">‚Äì</span></div>
  <div class="data-item"><span>Waktu</span><span id="qTime">‚Äì</span></div>
  <p style="text-align:center;margin-top:10px;color:gray;">Sumber: <a href="https://bmkg.go.id" target="_blank">BMKG</a></p>
</div>


    </div>
    <div class="slide">
      <div class="card">
        <h2>üì° Radar Cuaca Juanda</h2>
        <iframe src="https://stamet-juanda.bmkg.go.id/radar/"></iframe>
      </div>
    </div>
    <div class="slide">
      <div class="card">
        <h2>üåã Peta Desa</h2>
        <iframe src="https://id.wikipedia.org/wiki/Condro,_Pasirian,_Lumajang#/map/0"></iframe>
      </div>
    </div>
  </div>

  <div class="progress"><div class="fill" id="fill"></div></div>

  <div class="controls">
    <button class="btn" id="prev">‚óÄ Prev</button>
    <div id="dots"></div>
    <button class="btn" id="next">Next ‚ñ∂</button>
    <button class="btn" id="pause">‚è∏ Pause</button>
  </div>

  <footer>¬© 2025 KOSABANGSA</footer>
</div>

<script>
const slides=document.querySelectorAll('.slide');
const dotsContainer=document.getElementById('dots');
const fill=document.getElementById('fill');
let current=0,auto=true,interval,progress;
slides.forEach((_,i)=>{
  const d=document.createElement('div');
  d.className='dot'+(i===0?' active':'');
  d.onclick=()=>goTo(i);
  dotsContainer.appendChild(d);
});
function goTo(i){
  slides[current].classList.remove('active');
  dotsContainer.children[current].classList.remove('active');
  current=(i+slides.length)%slides.length;
  slides[current].classList.add('active');
  dotsContainer.children[current].classList.add('active');
  resetProgress();
}
function next(){goTo(current+1);}
function prev(){goTo(current-1);}
document.getElementById('next').onclick=next;
document.getElementById('prev').onclick=prev;
document.getElementById('pause').onclick=()=>{
  auto=!auto;
  document.getElementById('pause').textContent=auto?'‚è∏ Pause':'‚ñ∂ Play';
  auto?start():stop();
};
function start(){
  stop();next();
  interval=setInterval(next,6000);
  animateProgress();
}
function stop(){
  clearInterval(interval);
  clearInterval(progress);
}
function animateProgress(){
  fill.style.width='0%';
  let w=0;
  progress=setInterval(()=>{
    if(!auto) return;
    w+=100/(6000/100);
    fill.style.width=w+'%';
    if(w>=100) w=0;
  },100);
}
function resetProgress(){
  fill.style.width='0%';
}
function updateTime(){
  const n=new Date();
  document.getElementById('update').textContent='Terakhir diperbarui: '+n.toLocaleString('id-ID',{day:'numeric',month:'long',year:'numeric',hour:'2-digit',minute:'2-digit'});
}
async function loadQuakeReal() {
  try {
    // gunakan proxy publik agar bypass CORS
    const response = await fetch(
      "https://data.bmkg.go.id/DataMKG/TEWS/autogempa.json"
    );
    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);

    const data = await response.json();
    const g = data.Infogempa.gempa;

    // isi elemen HTML dengan data gempa terkini
    document.getElementById("qMag").textContent = g.Magnitude || "-";
    document.getElementById("qDepth").textContent = g.Kedalaman || "-";
    document.getElementById("qLoc").textContent = g.Wilayah || "-";
    document.getElementById("qTime").textContent = g.DateTime || "-";

    console.log("‚úÖ Data gempa terbaru BMKG:", g);
  } catch (e) {
    console.error("‚ö†Ô∏è Gagal memuat data BMKG:", e);
    document.getElementById("qLoc").textContent =
      "Tidak dapat memuat data BMKG.";
  }
}


updateTime();
loadQuakeReal(); // ‚Üê tambahkan ini
start();

// Grafik
new Chart(document.getElementById('windChart'),{type:'line',data:{labels:['1j','2j','3j','4j','5j','6j'],datasets:[{label:'Kecepatan (km/jam)',data:[10,12,15,14,18,20],borderColor:'#2563eb',fill:false}]}});
new Chart(document.getElementById('rainChart'),{type:'bar',data:{labels:['1j','2j','3j','4j','5j','6j'],datasets:[{label:'Curah (mm)',data:[2,3,1,4,5,6],backgroundColor:'#2563eb'}]}});
</script>
</body>
</html>
